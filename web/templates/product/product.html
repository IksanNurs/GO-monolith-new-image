{{ define "content" }}
<h2 class="mb-4">Product</h2>

{{ if .Error }}
<div class="alert alert-danger">
    {{ .Error }}
</div>
{{ end }}

<div class="card mb-4">
    <div class="card-header">
        <div class="card-title w-100 d-flex justify-content-between align-items-center mb-0">
            <div class="d-flex flex-column flex-sm-row">
                <a value="/product/new" class=" btn btn-primary mb-3  py-2 showModalButton" title="Tambah Product" size="modal-lg">
                    <i class="fa fa-plus"></i>
                    Tambah</a> &nbsp;&nbsp;
                <table class="table mb-0" style="display: none;" id="dataproduct1" style="width:100%">
                    <thead class="thead-light">
                        <tr>
                            <th style="min-width: 1px; white-space: nowrap;">#</th>
                            <th>Name</th>
                            <th style="min-width: 1px; white-space: nowrap;">Stock</th>
                            <th style="min-width: 1px; white-space: nowrap;">PV</th>
                            <th style="min-width: 1px; white-space: nowrap;">Harga Member</th>
                            <th style="min-width: 1px; white-space: nowrap;">Harga Non Member</th>
                        </tr>
                    </thead>
                </table>
            </div>
            <div class="d-flex flex-column flex-sm-row">
                <form id="filterForm" class="d-flex flex-column flex-sm-row">
                    <div class="mr-3">
                        <select id="monthSelect" name="month" class="form-control">
                            <option value="" selected="selected">All Month</option>
                           <option value="1">Januari</option>
                            <option value="2">Februari</option>
                            <option value="3">Maret</option>
                            <option value="4">April</option>
                            <option value="5">Mei</option>
                            <option value="6">Juni</option>
                            <option value="7">Juli</option>
                            <option value="8">Agustus</option>
                            <option value="9">September</option>
                            <option value="10">Oktober</option>
                            <option value="11">November</option>
                            <option value="12">Desember</option>
                        </select>
                    </div>
                    <div class="mr-3">
                        <select id="yearSelect" name="year" class="form-control">
                            <option value="" selected="selected">All Year</option>
                            <option value="2024">2024</option>
                            <option value="2023">2023</option>
                            <option value="2022">2022</option>
                        </select>
                    </div>
                    <div class="mr-1">
                        <button type="submit" class="btn btn-secondary mb-3">Apply</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table mb-0" id="dataproduct" style="width:100%">
                <thead class="thead-light">
                    <tr>
                        <th style="min-width: 1px; white-space: nowrap;">#</th>
                        <th style="min-width: 1px; white-space: nowrap;"></th>
                        <th>Name</th>
                        <th style="min-width: 1px; white-space: nowrap;">Stock</th>
                        <th style="min-width: 1px; white-space: nowrap;">PV</th>
                        <th style="min-width: 1px; white-space: nowrap;">Harga Member</th>
                        <th style="min-width: 1px; white-space: nowrap;">Harga Non Member</th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>
</div>

<script>
    document.getElementById('filterForm').addEventListener('submit', function (event) {
        event.preventDefault();

        var month = document.getElementById('monthSelect').value;
        var year = document.getElementById('yearSelect').value;

        // Membuat URL dengan parameter berdasarkan bulan dan tahun yang dipilih
        var url = '/product';

        if (month !== '') {
            url += '?month=' + encodeURIComponent(month);
        }

        if (year !== '') {
            if (url.includes('?')) {
                url += '&year=' + encodeURIComponent(year);
            } else {
                url += '?year=' + encodeURIComponent(year);
            }
        }

        // Redirect ke URL yang baru dibuat
        window.location.href = url;
    });
</script>
{{ end }}